<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="initial-scale=1" name="viewport" /><title>Padrino - Rake Tasks</title><link href="../../../images/favicons/apple-touch-icon-57x57-75d6516e.png" rel="apple-touch-icon" sizes="57x57" /><link href="../../../images/favicons/apple-touch-icon-60x60-76221479.png" rel="apple-touch-icon" sizes="60x60" /><link href="../../../images/favicons/apple-touch-icon-72x72-7bd96522.png" rel="apple-touch-icon" sizes="72x72" /><link href="../../../images/favicons/apple-touch-icon-76x76-30739e4d.png" rel="apple-touch-icon" sizes="76x76" /><link href="../../../images/favicons/apple-touch-icon-114x114-1b1963ee.png" rel="apple-touch-icon" sizes="114x114" /><link href="../../../images/favicons/apple-touch-icon-144x144-b3992622.png" rel="apple-touch-icon" sizes="144x144" /><link href="../../../images/favicons/apple-touch-icon-152x152-48259d13.png" rel="apple-touch-icon" sizes="152x152" /><link href="../../../images/favicons/apple-touch-icon-180x180-b8e9ebf6.png" rel="apple-touch-icon" sizes="180x180" /><link href="../../../images/favicons/favicon-32x32-c7d41b6f.png" rel="icon" sizes="32x32" type="image/png" /><link href="../../../images/favicons/favicon-194x194-a2b53f7f.png" rel="icon" sizes="194x194" type="image/png" /><link href="../../../images/favicons/favicon-96x96-1f5cec29.png" rel="icon" sizes="96x96" type="image/png" /><link href="../../../images/favicons/android-chrome-192x192-a15741d5.png" rel="icon" sizes="192x192" type="image/png" /><link href="../../../images/favicons/favicon-16x16-609a9b93.png" rel="icon" sizes="16x16" type="image/png" /><link href="/images/favicons/manifest.json" rel="manifest" /><link color="#5bbad5" href="../../../images/favicons/safari-pinned-tab-a188e924.svg" rel="mask-icon" /><link href="../../../images/favicons/favicon.ico" rel="shortcut icon" /><meta content="#da532c" name="msapplication-TileColor" /><meta content="../../../images/favicons/mstile-144x144-c2018144.png" name="msapplication-TileImage" /><meta content="/images/favicons/browserconfig.xml" name="msapplication-config" /><meta content="#ffffff" name="theme-color" /><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" /><link href="../../../assets/stylesheets/all-2fbb5fe1.css" rel="stylesheet" /><script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.0/anchor.min.js"></script><script src="../../../assets/javascripts/all-956a861e.js"></script><link href="http://padrinorb.com/blog.rss" rel="alternate" title="Blog - Padrino Ruby Web Framework" type="application/rss+xml" /></head><body class="guides guides_features guides_features_rake-tasks guides_features_rake-tasks_index"><div class="grid"><header class="header"><h1 class="header__name"><a href="/" class="padrino-name">Padrino</a></h1><div class="header__navigation"><nav class="navigation"><a class="navigation__toggler" href="#" id="navigation__toggler"><span class="navigation__toggler__icon fa fa-navicon"></span></a><ul class="navigation__items" id="navigation__items"><li class="navigation__item"><a href="/" class="navigation__link">Overview</a></li><li class="navigation__item"><a href="/guides/" class="navigation__link--is-active">Guides</a></li><li class="navigation__item"><a href="/blog/" class="navigation__link">Blog</a></li><li class="navigation__item"><a href="http://www.rubydoc.info/github/padrino/padrino-framework" class="navigation__link">API</a></li><li class="navigation__item"><a href="/contribute/" class="navigation__link">Contribute</a></li><li class="navigation__item"><a href="https://github.com/padrino/padrino-framework" class="navigation__link"><span class="button--slim">GitHub</span></a></li></ul></nav></div></header><div class="page"><div class="page__sidebar"><div class="sidebar"><h4 class="sidebar__header--first">Guides</h4><h5 class="sidebar__header"><a href="/guides/introduction/overview/">Introduction</a></h5><ul class="sidebar__items"><li class="sidebar__item"><a href="/guides/introduction/overview/" class="sidebar__link">Overview</a></li><li class="sidebar__item"><a href="/guides/introduction/why-learn-padrino/" class="sidebar__link">Why Learn Padrino?</a></li><li class="sidebar__item"><a href="/guides/introduction/examples/" class="sidebar__link">Examples</a></li><li class="sidebar__item"><a href="/guides/introduction/the-bleeding-edge/" class="sidebar__link">The Bleeding Edge</a></li><li class="sidebar__item"><a href="/guides/introduction/press/" class="sidebar__link">Press</a></li></ul><h5 class="sidebar__header"><a href="/guides/getting-started/overview/">Getting Started</a></h5><ul class="sidebar__items"><li class="sidebar__item"><a href="/guides/getting-started/overview/" class="sidebar__link">Overview</a></li><li class="sidebar__item"><a href="/guides/getting-started/basic-projects/" class="sidebar__link">Basic Projects</a></li><li class="sidebar__item"><a href="/guides/getting-started/installation/" class="sidebar__link">Installation</a></li><li class="sidebar__item"><a href="/guides/getting-started/blog-tutorial/" class="sidebar__link">Blog Tutorial</a></li></ul><h5 class="sidebar__header"><a href="/guides/features/overview/">Features</a></h5><ul class="sidebar__items"><li class="sidebar__item"><a href="/guides/features/overview/" class="sidebar__link">Overview</a></li><li class="sidebar__item"><a href="/guides/features/padrino-admin/" class="sidebar__link">Padrino Admin</a></li><li class="sidebar__item"><a href="/guides/features/padrino-mailer/" class="sidebar__link">Padrino Mailer</a></li><li class="sidebar__item"><a href="/guides/features/padrino-cache/" class="sidebar__link">Padrino Cache</a></li><li class="sidebar__item"><a href="/guides/features/mounting-applications/" class="sidebar__link">Mounting Applications</a></li><li class="sidebar__item"><a href="/guides/features/development-commands/" class="sidebar__link">Development Commands</a></li><li class="sidebar__item"><a href="/guides/features/extensions/" class="sidebar__link">Extensions</a></li><li class="sidebar__item"><a href="/guides/features/localization/" class="sidebar__link">Localization</a></li><li class="sidebar__item"><a href="/guides/features/rake-tasks/" class="sidebar__link--is-active">Rake Tasks</a></li></ul><h5 class="sidebar__header"><a href="/guides/generators/overview/">Generators</a></h5><ul class="sidebar__items"><li class="sidebar__item"><a href="/guides/generators/overview/" class="sidebar__link">Overview</a></li><li class="sidebar__item"><a href="/guides/generators/projects/" class="sidebar__link">Projects</a></li><li class="sidebar__item"><a href="/guides/generators/plugins/" class="sidebar__link">Plugins</a></li><li class="sidebar__item"><a href="/guides/generators/controllers/" class="sidebar__link">Controllers</a></li><li class="sidebar__item"><a href="/guides/generators/models/" class="sidebar__link">Models</a></li><li class="sidebar__item"><a href="/guides/generators/migrations/" class="sidebar__link">Migrations</a></li><li class="sidebar__item"><a href="/guides/generators/mailers/" class="sidebar__link">Mailers</a></li><li class="sidebar__item"><a href="/guides/generators/sub-applications/" class="sidebar__link">Sub-Applications</a></li><li class="sidebar__item"><a href="/guides/generators/tiny-skeleton/" class="sidebar__link">Tiny Skeleton</a></li><li class="sidebar__item"><a href="/guides/generators/admin/" class="sidebar__link">Admin</a></li><li class="sidebar__item"><a href="/guides/generators/components/" class="sidebar__link">Components</a></li><li class="sidebar__item"><a href="/guides/generators/tasks/" class="sidebar__link">Tasks</a></li></ul><h5 class="sidebar__header"><a href="/guides/controllers/overview/">Controllers</a></h5><ul class="sidebar__items"><li class="sidebar__item"><a href="/guides/controllers/overview/" class="sidebar__link">Overview</a></li><li class="sidebar__item"><a href="/guides/controllers/routing/" class="sidebar__link">Routing</a></li><li class="sidebar__item"><a href="/guides/controllers/layouts/" class="sidebar__link">Layouts</a></li><li class="sidebar__item"><a href="/guides/controllers/provides-formats/" class="sidebar__link">Provides Format</a></li><li class="sidebar__item"><a href="/guides/controllers/params-whitelisting/" class="sidebar__link">Params Whitelisting</a></li><li class="sidebar__item"><a href="/guides/controllers/route-filters/" class="sidebar__link">Route Filters</a></li><li class="sidebar__item"><a href="/guides/controllers/prioritized-routes/" class="sidebar__link">Prioritized Routes</a></li><li class="sidebar__item"><a href="/guides/controllers/custom-conditions/" class="sidebar__link">Custom Conditions</a></li><li class="sidebar__item"><a href="/guides/controllers/parsing-params/" class="sidebar__link">Parsing Params</a></li><li class="sidebar__item"><a href="/guides/controllers/rendering/" class="sidebar__link">Rendering</a></li><li class="sidebar__item"><a href="/guides/controllers/sessions/" class="sidebar__link">Sessions</a></li></ul><h5 class="sidebar__header"><a href="/guides/application-helpers/overview/">Application Helpers</a></h5><ul class="sidebar__items"><li class="sidebar__item"><a href="/guides/application-helpers/overview/" class="sidebar__link">Overview</a></li><li class="sidebar__item"><a href="/guides/application-helpers/output-helpers/" class="sidebar__link">Output Helpers</a></li><li class="sidebar__item"><a href="/guides/application-helpers/tag-helpers/" class="sidebar__link">Tag Helpers</a></li><li class="sidebar__item"><a href="/guides/application-helpers/asset-helpers/" class="sidebar__link">Asset Helpers</a></li><li class="sidebar__item"><a href="/guides/application-helpers/form-helpers/" class="sidebar__link">Form Helpers</a></li><li class="sidebar__item"><a href="/guides/application-helpers/form-builders/" class="sidebar__link">Form Builders</a></li><li class="sidebar__item"><a href="/guides/application-helpers/standard-form-builder/" class="sidebar__link">Standard Form Builder</a></li><li class="sidebar__item"><a href="/guides/application-helpers/custom-form-builders/" class="sidebar__link">Custom Form Builders</a></li><li class="sidebar__item"><a href="/guides/application-helpers/nested-object-form-support/" class="sidebar__link">Nested Object Form Support</a></li><li class="sidebar__item"><a href="/guides/application-helpers/format-helpers/" class="sidebar__link">Format Helpers</a></li><li class="sidebar__item"><a href="/guides/application-helpers/render-helpers/" class="sidebar__link">Render Helpers</a></li><li class="sidebar__item"><a href="/guides/application-helpers/custom-helpers/" class="sidebar__link">Custom Helpers</a></li><li class="sidebar__item"><a href="/guides/application-helpers/ujs-helpers/" class="sidebar__link">Unobtrusive JavaScript Helpers</a></li></ul><h5 class="sidebar__header"><a href="/guides/adding-components/overview/">Adding Components</a></h5><ul class="sidebar__items"><li class="sidebar__item"><a href="/guides/adding-components/overview/" class="sidebar__link">Overview</a></li><li class="sidebar__item"><a href="/guides/adding-components/persistence-engine/" class="sidebar__link">Persistence Engine</a></li><li class="sidebar__item"><a href="/guides/adding-components/javascript-engine/" class="sidebar__link">JavaScript Engine</a></li><li class="sidebar__item"><a href="/guides/adding-components/testing-library/" class="sidebar__link">Testing Library</a></li><li class="sidebar__item"><a href="/guides/adding-components/rendering-engine/" class="sidebar__link">Rendering Engine</a></li><li class="sidebar__item"><a href="/guides/adding-components/mocking-library/" class="sidebar__link">Mocking Library</a></li><li class="sidebar__item"><a href="/guides/adding-components/stylesheet-engine/" class="sidebar__link">Stylesheet Engine</a></li><li class="sidebar__item"><a href="/guides/adding-components/locale-translations/" class="sidebar__link">Locale Translations</a></li></ul><h5 class="sidebar__header"><a href="/guides/advanced-usage/overview/">Advanced Usage</a></h5><ul class="sidebar__items"><li class="sidebar__item"><a href="/guides/advanced-usage/overview/" class="sidebar__link">Overview</a></li><li class="sidebar__item"><a href="/guides/advanced-usage/extending-padrino-projects/" class="sidebar__link">Extending Padrino Projects</a></li><li class="sidebar__item"><a href="/guides/advanced-usage/3rd-party-plugins/" class="sidebar__link">3rd Party Plugins</a></li><li class="sidebar__item"><a href="/guides/advanced-usage/asynchronous-concurrency-with-padrino/" class="sidebar__link">Asyncronous Concurrency</a></li><li class="sidebar__item"><a href="/guides/advanced-usage/grape-with-padrino/" class="sidebar__link">Grape with Padrino</a></li><li class="sidebar__item"><a href="/guides/advanced-usage/running-padrino-on-jruby/" class="sidebar__link">Running Padrino on JRuby</a></li><li class="sidebar__item"><a href="/guides/advanced-usage/standalone-usage-in-sinatra/" class="sidebar__link">Standalone Usage in Sinatra</a></li><li class="sidebar__item"><a href="/guides/advanced-usage/padrino-and-omniauth-overview/" class="sidebar__link">Padrino and OmniAuth Overview</a></li></ul></div></div><div class="page__content"><div class="content"><p class="content__chapter-title">Features</p><h1 id="rake-tasks">Rake Tasks</h1>
<p>After generating a new padrino project, you will not find any Rakefile in your
generated project folder structure; in fact it&#39;s not strictly needed to build a
new one because we can already use padrino rake:</p>
<div class="highlight"><pre class="syntax shell"><code><span class="c"># for a list of tasks</span>
<span class="nv">$ </span>padrino rake <span class="nt">-T</span>
</code></pre></div>
<p>If you need custom tasks you can add those to:</p>

<ul>
<li><code>your_project_/**lib/tasks**</code></li>
<li><code>your_project_/**tasks**</code></li>
<li><code>your_project_/**test**</code></li>
<li><code>your_project_/**spec**</code></li>
</ul>

<p>Padrino will look recursively for any <code>*.rake</code> file in any of these directories.</p>

<p>Padrino by default has some useful tasks.</p>

<hr>
<h2 id="basic">Basic</h2>
<p>Like other frameworks we have an <code>:environment</code> task that loads our
<code>environment</code> and <code>apps</code>. Example:</p>
<div class="highlight"><pre class="syntax ruby"><code><span class="c1"># This is a custom task</span>
<span class="c1"># task/version.rake</span>
<span class="n">task</span> <span class="ss">:version</span> <span class="o">=&gt;</span> <span class="ss">:environment</span> <span class="k">do</span>
  <span class="nb">puts</span> <span class="no">Padrino</span><span class="p">.</span><span class="nf">version</span>
<span class="k">end</span>
</code></pre></div>
<hr>
<h2 id="routes">Routes</h2>
<p>We have support for retrieving a list of named routes within your application
for easy access.</p>
<div class="highlight"><pre class="syntax shell"><code><span class="nv">$ </span>padrino rake routes
</code></pre></div>
<p>which will return all the named routes for your project:</p>
<div class="highlight"><pre class="syntax shell"><code>Application: SampleBlogUpdated::Admin
    URL                           REQUEST  PATH
    <span class="o">(</span>:sessions, :new<span class="o">)</span>               GET    /admin/sessions/new
    <span class="o">(</span>:sessions, :create<span class="o">)</span>           POST    /admin/sessions/create
    <span class="o">(</span>:sessions, :destroy<span class="o">)</span>         DELETE   /admin/sessions/destroy
    <span class="o">(</span>:base, :index<span class="o">)</span>                 GET    /admin/
    <span class="o">(</span>:accounts, :index<span class="o">)</span>             GET    /admin/accounts
    <span class="o">(</span>:accounts, :new<span class="o">)</span>               GET    /admin/accounts/new
    <span class="o">(</span>:accounts, :create<span class="o">)</span>           POST    /admin/accounts/create
    <span class="o">(</span>:accounts, :edit<span class="o">)</span>              GET    /admin/accounts/edit/:id
    <span class="o">(</span>:accounts, :update<span class="o">)</span>            PUT    /admin/accounts/update/:id
    <span class="o">(</span>:accounts, :destroy<span class="o">)</span>         DELETE   /admin/accounts/destroy/:id
    <span class="o">(</span>:accounts, :destroy_many<span class="o">)</span>    DELETE   /admin/accounts/destroy_many
    <span class="o">(</span>:posts, :index<span class="o">)</span>                GET    /admin/posts
    <span class="o">(</span>:posts, :new<span class="o">)</span>                  GET    /admin/posts/new
    <span class="o">(</span>:posts, :create<span class="o">)</span>              POST    /admin/posts/create
    <span class="o">(</span>:posts, :edit<span class="o">)</span>                 GET    /admin/posts/edit/:id
    <span class="o">(</span>:posts, :update<span class="o">)</span>               PUT    /admin/posts/update/:id
    <span class="o">(</span>:posts, :destroy<span class="o">)</span>            DELETE   /admin/posts/destroy/:id
    <span class="o">(</span>:posts, :destroy_many<span class="o">)</span>       DELETE   /admin/posts/destroy_many

Application: SampleBlogUpdated::App
    URL                 REQUEST  PATH
    <span class="o">(</span>:about<span class="o">)</span>              GET    /about_us
    <span class="o">(</span>:posts, :index<span class="o">)</span>      GET    /posts<span class="o">(</span>.:format<span class="o">)</span>?
    <span class="o">(</span>:posts, :show<span class="o">)</span>       GET    /posts/show/:id
</code></pre></div>
<hr>
<h2 id="testing">Testing</h2>
<p>When testing with Padrino you have a built-in <code>padrino rake test</code> or for rspec
<code>padrino rake spec</code>.</p>
<div class="highlight"><pre class="syntax shell"><code><span class="nv">$ </span>padrino rake <span class="nb">test</span> <span class="c"># =&gt; for bacon, shoulda</span>
<span class="nv">$ </span>padrino rake spec <span class="c"># =&gt; for rspec</span>
</code></pre></div>
<p>you can customize <code>test/test.rake</code> or <code>spec/spec.rake</code></p>

<hr>
<h2 id="i18n">I18n</h2>
<p>You can auto generate a <em>yml</em> file for localizing your models using this
command:</p>
<div class="highlight"><pre class="syntax shell"><code><span class="nv">$ </span>padrino rake locale:models
</code></pre></div>
<p>See <a href="/guides/features/localization" title="Localization">Localization</a> for detailed instructions.</p>

<hr>
<h2 id="orm">ORM</h2>
<p>Padrino has rake tasks for <em>DataMapper</em> , <em>ActiveRecord</em>, <em>Sequel</em>,
<em>Mongomapper</em>,and <em>Mongoid</em> with some <strong>bonuses</strong>.</p>

<p><strong>NOTE</strong>: we have a <strong>namespace</strong> for each orm, because of this, Padrino can
  mount several applications and each of them can use different orms without
  conflict, so that you can have multiple applications living together and one
  of them can use DataMapper, while another
  <code>ActiveRecord/MongoMapper/Couch/Sequel</code> instead. In this way we prevent
  collisions.</p>

<hr>
<h2 id="activerecord-tasks">ActiveRecord Tasks</h2><div class="highlight"><pre class="syntax shell"><code>rake ar:abort_if_pending_migrations    <span class="c"># Raises an error if there are pending migrations.</span>
rake ar:auto:upgrade                   <span class="c"># Uses schema.rb to auto-upgrade.</span>
rake ar:charset                        <span class="c"># Retrieves database charset.</span>
rake ar:collation                      <span class="c"># Retrieves databsae collation.</span>
rake ar:create                         <span class="c"># Creates the database as defined in config/database.yml</span>
rake ar:create:all                     <span class="c"># Creates local databases as defined in config/database.yml</span>
rake ar:drop                           <span class="c"># Drops the database for the current Padrino.env</span>
rake ar:drop:all                       <span class="c"># Drops local databases defined in config/database.yml</span>
rake ar:forward                        <span class="c"># Pushes the schema to the next version.</span>
rake ar:migrate                        <span class="c"># Migrates the database through scripts in db/migrate.</span>
rake ar:migrate:down                   <span class="c"># Runs the "down" for a given migration VERSION.</span>
rake ar:migrate:redo                   <span class="c"># Rollbacks current migration and migrates up to version</span>
rake ar:migrate:reset                  <span class="c"># Resets your database using your migrations.</span>
rake ar:migrate:up                     <span class="c"># Runs the "up" for a given migration VERSION NUMBER</span>
rake ar:reset                          <span class="c"># Drops and recreates the database using db/schema.rb.</span>
rake ar:rollback                       <span class="c"># Rolls back the schema to previous schema version.</span>
rake ar:schema:dump                    <span class="c"># Creates a portable db/schema.rb file.</span>
rake ar:schema:load                    <span class="c"># Loads a schema.rb file into the database.</span>
rake ar:schema:to_migration            <span class="c"># Creates a migration from schema.rb</span>
rake ar:schema:to_migration_with_reset <span class="c"># Creates a migration and resets the migrations log.</span>
rake ar:setup                          <span class="c"># Creates the database, loads the schema, and seeds data.</span>
rake ar:structure:dump                 <span class="c"># Dumps the database structure to a SQL file.</span>
rake ar:version                        <span class="c"># Retrieves the current schema version number.</span>
</code></pre></div>
<p><strong>rake ar:auto:upgrade</strong></p>

<p>This is some sort of super cool and useful task for people like me who don&#39;t
love migrations (especially for small apps). It&#39;s a forked version of
<a href="http://github.com/pjhyett/auto_migrations">auto_migrations</a>.</p>

<p>Basically, instead of writing migrations you can directly edit your
<strong>schema.rb</strong> and perform <em>a non destructive</em> migration with <code>padrino rake
ar:auto:upgrade</code>.</p>

<hr>
<h2 id="datamapper-tasks">DataMapper Tasks</h2><div class="highlight"><pre class="syntax shell"><code>rake dm:auto:migrate          <span class="c"># Performs an automigration (resets your db data)</span>
rake dm:auto:upgrade          <span class="c"># Performs a non destructive automigration</span>
rake dm:create                <span class="c"># Creates the database</span>
rake dm:drop                  <span class="c"># Drops the database (postgres and mysql only)</span>
rake dm:migrate               <span class="c"># Migrates the database to the latest version</span>
rake dm:migrate:down[version] <span class="c"># Migrates down using migrations</span>
rake dm:migrate:up[version]   <span class="c"># Migrates up using migrations</span>
rake dm:reset                 <span class="c"># Drops the database, and migrates from scratch</span>
rake dm:setup                 <span class="c"># Create the database migrate and initialize with the seed data</span>
</code></pre></div>
<hr>
<h2 id="sequel-tasks">Sequel Tasks</h2><div class="highlight"><pre class="syntax shell"><code>rake sq:migrate:auto        <span class="c"># Perform automigration (reset your db data)</span>
rake sq:migrate:to[version] <span class="c"># Perform migration up/down to VERSION</span>
rake sq:migrate:up          <span class="c"># Perform migration up to latest migration available</span>
rake sq:migrate:down        <span class="c"># Perform migration down (erase all data)</span>
rake sq:reset               <span class="c"># Drops the database, and migrates from scratch</span>
</code></pre></div>
<hr>
<h2 id="mongomapper-tasks">Mongomapper Tasks</h2><div class="highlight"><pre class="syntax shell"><code>rake mm:translate              <span class="c"># Generates .yml files for I18n translations</span>
</code></pre></div>
<hr>
<h2 id="mongoid-tasks">Mongoid Tasks</h2><div class="highlight"><pre class="syntax shell"><code>rake mi:drop                    <span class="c"># Drops all the collections for the database for the current environment</span>
rake mi:create_indexes          <span class="c"># Create the indexes defined on your mongoid models</span>
rake mi:objectid_convert        <span class="c"># Convert string objectids in mongo database to ObjectID type</span>
rake mi:cleanup_old_collections <span class="c"># Clean up old collections backed up by objectid_convert</span>
</code></pre></div>
<hr>
<h2 id="seed">Seed</h2>
<p>Like in Rails we can populate our db using <code>db/seeds.rb</code> here&#39;s an example (from
our [padrino-admin](/guides/padrino-admin/ &quot;padrino-admin)):</p>
<div class="highlight"><pre class="syntax ruby"><code><span class="n">email</span>     <span class="o">=</span> <span class="n">shell</span><span class="p">.</span><span class="nf">ask</span> <span class="s2">"Which email do you want use for loggin into admin?"</span>
<span class="n">password</span>  <span class="o">=</span> <span class="n">shell</span><span class="p">.</span><span class="nf">ask</span> <span class="s2">"Tell me the password to use:"</span>

<span class="n">shell</span><span class="p">.</span><span class="nf">say</span> <span class="s2">""</span>

<span class="n">account</span> <span class="o">=</span> <span class="no">Account</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:email</span> <span class="o">=&gt;</span> <span class="n">email</span><span class="p">,</span> <span class="ss">:password</span> <span class="o">=&gt;</span> <span class="n">password</span><span class="p">,</span>
                         <span class="ss">:password_confirmation</span> <span class="o">=&gt;</span> <span class="n">password</span><span class="p">,</span> <span class="ss">:role</span> <span class="o">=&gt;</span> <span class="s2">"admin"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">account</span><span class="p">.</span><span class="nf">valid?</span>
  <span class="n">shell</span><span class="p">.</span><span class="nf">say</span> <span class="s2">"Perfect! Your account was created."</span>
  <span class="n">shell</span><span class="p">.</span><span class="nf">say</span> <span class="s2">""</span>
  <span class="n">shell</span><span class="p">.</span><span class="nf">say</span> <span class="s2">"Now you can start your server with padrino start and then login into /admin with:"</span>
  <span class="n">shell</span><span class="p">.</span><span class="nf">say</span> <span class="s2">"   email: </span><span class="si">#{</span><span class="n">email</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">shell</span><span class="p">.</span><span class="nf">say</span> <span class="s2">"   password: </span><span class="si">#{</span><span class="n">password</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">shell</span><span class="p">.</span><span class="nf">say</span> <span class="s2">""</span>
  <span class="n">shell</span><span class="p">.</span><span class="nf">say</span> <span class="s2">"That's all!"</span>
<span class="k">else</span>
  <span class="n">shell</span><span class="p">.</span><span class="nf">say</span> <span class="s2">"Sorry but some thing went worng!"</span>
  <span class="n">shell</span><span class="p">.</span><span class="nf">say</span> <span class="s2">""</span>
  <span class="n">account</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="n">shell</span><span class="p">.</span><span class="nf">say</span> <span class="s2">"   - </span><span class="si">#{</span><span class="n">m</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div><p class="updated"> last updated: 2022-02-22</p><div id='disqus_thread'></div>
<script type='text/javascript'>
//<![CDATA[
                  var disqus_shortname = 'padrinorb';
          
    (function() {
      if (typeof(DISQUS) === 'undefined') {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      } else {
        DISQUS.reset({
          reload: true,
          config: function () {
            this.page.identifier = document.title;
            this.page.url = location.href;
          }
        });
      }
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript>
<a href='http://disqus.com' class='dsq-brlink'>comments powered by <span class='logo-disqus'>Disqus</span></a>
</div></div></div><hr /><footer class="footer"><p>Padrino is released under the MIT LICENSE<br/>
Hosting by <a href="https://pages.github.com" title="GitHub Pages">GitHub Pages</a><br/>
Logo design by <a href="https://www.unpolo.com/" title="unpolo">unpolo</a></p>
<script>anchors.add('').remove('.sidebar h4, .sidebar h5, .header h1');
  ((window.gitter = {}).chat = {}).options = {
    room: 'padrino/padrino-framework'
  };</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script></footer></div></body></html>